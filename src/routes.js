const express = require("express");
const router = express.Router();
const { 
    registerUser, 
    loginUser, 
    getUsers, 
    updateUser, 
    deleteUser, 
    getItems, 
    getItemById, 
    createItem, 
    updateItem, 
    deleteItem 
} = require("./controllers");

const authMiddleware = require("./middleware.js"); // Middleware de autenticaciÃ³n

// ğŸ”¹ Rutas de Usuarios
router.post("/register", registerUser);  // Crear usuario
router.post("/login", loginUser);        // Iniciar sesiÃ³n
router.get("/users", authMiddleware, getUsers);          // ğŸ”’ Obtener todos los usuarios (protegido)
router.put("/users/:id", authMiddleware, updateUser);    // ğŸ”’ Actualizar usuario (protegido)
router.delete("/users/:id", authMiddleware, deleteUser); // ğŸ”’ Eliminar usuario (protegido)

// ğŸ”¹ Rutas de Items (CRUD)
router.get("/items", getItems);                           // Obtener todos los items (pÃºblico)
router.get("/items/:id", authMiddleware, getItemById);    // ğŸ”’ Obtener un Ã­tem por ID (ahora protegido)
router.post("/items", authMiddleware, createItem);        // ğŸ”’ Crear item (protegido)
router.put("/items/:id", authMiddleware, updateItem);     // ğŸ”’ Actualizar item (protegido)
router.delete("/items/:id", authMiddleware, deleteItem);  // ğŸ”’ Eliminar item (protegido)

module.exports = router;